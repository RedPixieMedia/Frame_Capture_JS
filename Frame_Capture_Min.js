function frameCapture(src, pos, ext, callback) {var FC = this;var video = document.createElement("video");var canvas = document.createElement("canvas");var context = canvas.getContext("2d");video.src = src;video.style.opacity = 0;canvas.style.opacity = 0;document.body.appendChild(video);document.body.appendChild(canvas);video.addEventListener("loadedmetadata", function() {video.currentTime = pos;canvas.width = video.videoWidth;canvas.height = video.videoHeight;}, false);video.addEventListener("seeked", function() {context.drawImage(video, 0, 0, canvas.width, canvas.height);FC.dataUrl = canvas.toDataURL("image/" + ext);callback(FC.dataUrl);video.parentElement.removeChild(video);canvas.parentElement.removeChild(canvas);}, false);} 